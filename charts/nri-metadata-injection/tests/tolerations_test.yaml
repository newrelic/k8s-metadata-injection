suite: test tolerations setup
templates:
  - templates/deployment.yaml
release:
  name: release
  namespace: ns
tests:
  - it: tolerations is not set by default
    set:
      cluster: my-cluster
      asserts:
        - isNull:
            path: spec.template.spec.tolerations
  - it: tolerations custom value
    set:
      cluster: my-cluster
      tolerations:
      -  key: tolerationsKey
         operator: Equal
         value: tolerationsValue
         effect: NoSchedule
    asserts:
        - equal:
            path: spec.template.spec.tolerations
            value:
            -  key: tolerationsKey
               operator: Equal
               value: tolerationsValue
               effect: NoSchedule
