suite: priorityClassName
templates:
  - templates/deployment.yaml
release:
  name: my-release
  namespace: my-namespace
tests:
  - it: should not set a priorityClassName when none is provided
    set:
      cluster: test-cluster
      licenseKey: us-whatever
    asserts:
      - notExists:
          path: spec.template.spec.priorityClassName
  - it: should inherit global.priorityClassName when local priorityClassName not set
    set:
      cluster: test-cluster
      global.priorityClassName: global-priority-class
    asserts:
      - equal:
          path: spec.template.spec.priorityClassName
          value: global-priority-class

  - it: should use local priorityClassName over global.priorityClassName
    set:
      cluster: test-cluster
      priorityClassName: local-priority-class
      global.priorityClassName: global-priority-class
    asserts:
      - equal:
          path: spec.template.spec.priorityClassName
          value: local-priority-class
