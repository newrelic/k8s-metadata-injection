suite: test pod annotations configuration
templates:
  - templates/deployment.yaml
release:
  name: my-release
  namespace: my-namespace
tests:
  - it: should not have annotations when podAnnotations is empty
    set:
      cluster: test-cluster
      podAnnotations: {}
    asserts:
      - notExists:
          path: spec.template.metadata.annotations

  - it: should set pod annotations from values
    set:
      cluster: test-cluster
      podAnnotations:
        customKey1: "customValue1"
        customKey2: "customValue2"
    asserts:
      - equal:
          path: spec.template.metadata.annotations.customKey1
          value: customValue1
      - equal:
          path: spec.template.metadata.annotations.customKey2
          value: customValue2
