name: Reusable Trigger Prerelease Creation

# This workflow triggers a prerelease creation with changelog and the release notes created by the release toolkit.
# This workflow should be triggered merely from the default branch.
# For more details about how to release follow https://github.com/newrelic/coreint-automation/blob/main/docs/release_runbook.md

on:
  workflow_call:

jobs:
  prerelease:
    uses: newrelic/coreint-automation/.github/workflows/trigger_prerelease.yaml@v1
    with:
      rt-included-files: go.mod,go.sum,Dockerfile
      bot_email: '${{ vars.K8S_AGENTS_BOT_EMAIL }}'
      bot_name: '${{ vars.K8S_AGENTS_BOT_NAME }}'
    secrets:
      bot_token: ${{ secrets.K8S_AGENTS_BOT_TOKEN }}
      slack_channel:  ${{ secrets.K8S_AGENTS_SLACK_CHANNEL }}
      slack_token: ${{ secrets.K8S_AGENTS_SLACK_TOKEN }}
